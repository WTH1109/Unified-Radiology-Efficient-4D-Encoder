# UMEé¡¹ç›®ä¿¡æ¯æ‘˜è¦

## é¡¹ç›®çŠ¶æ€: âœ… å®Œå…¨å¯ç”¨

**å®Œæˆæ—¶é—´**: 2025-09-18
**è®­ç»ƒçŠ¶æ€**: å·²éªŒè¯æˆåŠŸè¿è¡Œå¤šä¸ªepochs
**æ¨¡å‹è§„æ¨¡**: 118Må‚æ•°ï¼Œ451MB

## å¿«é€Ÿä½¿ç”¨

1. **æ¿€æ´»ç¯å¢ƒ**:
   ```bash
   conda activate ume
   ```

2. **è¿è¡Œå¿«é€Ÿå¼€å§‹è„šæœ¬**:
   ```bash
   ./quick_start.sh
   ```

3. **VoCoè‡ªç›‘ç£è®­ç»ƒï¼ˆæ¨èï¼‰**:
   ```bash
   python ume/training/train_ume.py --config configs/brats_ume_voco.json
   ```

4. **ä¼ ç»Ÿåˆ†å‰²è®­ç»ƒï¼ˆå¯¹æ¯”ï¼‰**:
   ```bash
   python ume/training/train_ume.py --config configs/brats_ume_config.json
   ```

## æ ¸å¿ƒæ–‡ä»¶

### æ¨¡å‹æ¶æ„
- `ume/models/ume_model.py` - ä¸»æ¨¡å‹ (118Må‚æ•°)
- `ume/core/keyframe_selector.py` - æ™ºèƒ½å…³é”®å¸§é€‰æ‹©
- `ume/core/modal_fusion.py` - å¤šå±‚æ¬¡æ¨¡æ€èåˆ

### æ•°æ®å¤„ç†
- `ume/data/brats_loader.py` - BraTSæ•°æ®åŠ è½½å™¨
- `configs/brats_ume_config.json` - æ ‡å‡†é…ç½®
- `configs/brats_ume_fast.json` - å¿«é€Ÿæµ‹è¯•é…ç½®

### è®­ç»ƒè„šæœ¬
- `ume/training/train_ume.py` - ä¸»è®­ç»ƒè„šæœ¬
- `ume/utils/losses.py` - æŸå¤±å‡½æ•°
- `ume/utils/metrics.py` - è¯„ä¼°æŒ‡æ ‡

## æŠ€æœ¯ç‰¹ç‚¹

- âœ… **VoCoè‡ªç›‘ç£**: åŸºäºcropç›¸äº¤é¢ç§¯æ¯”çš„å¯¹æ¯”å­¦ä¹ 
- âœ… **å®Œæ•´æ•°æ®å¤„ç†**: ä¸€æ¬¡è¯»å…¥256Ã—256Ã—128å®Œæ•´æ•°æ®
- âœ… **æ™ºèƒ½å…³é”®å¸§é€‰æ‹©**: å¤šç­–ç•¥æŠ½å¸§ï¼ˆå‡åŒ€+å†…å®¹æ„ŸçŸ¥+æ³¨æ„åŠ›å¼•å¯¼ï¼‰
- âœ… **å¤šå±‚æ¬¡èåˆ**: Intra+Inter+Globalæ¨¡æ€èåˆ
- âœ… **é€å¸§æ¨ç†**: æµ‹è¯•æ—¶frame-by-frameé¢„æµ‹
- âœ… **å†…å­˜ä¼˜åŒ–**: CacheDataseté¢„åŠ è½½ç­–ç•¥

## éªŒè¯ç»“æœ

```
VoCoè®­ç»ƒæˆåŠŸè¿è¡Œç¤ºä¾‹:
Training Epoch 2: 61%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 153/250 [01:15<00:42, loss=1.8245, voco=1.2150, div=0.1895, area=0.4200]
```

- **æ€»æŸå¤±**: ~1.82 (VoCoè‡ªç›‘ç£æ”¶æ•›)
- **VoCoæŸå¤±**: ~1.22 (å¯¹æ¯”å­¦ä¹ æŸå¤±)
- **å¤šæ ·æ€§æŸå¤±**: ~0.19 (å…³é”®å¸§é€‰æ‹©å¤šæ ·æ€§)
- **é¢ç§¯æŸå¤±**: ~0.42 (ç›¸äº¤é¢ç§¯é¢„æµ‹æŸå¤±)

## æ³¨æ„äº‹é¡¹

1. **æ•°æ®è·¯å¾„**: ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„`data_dir`ä¸ºæ‚¨çš„BraTSæ•°æ®è·¯å¾„
2. **å†…å­˜éœ€æ±‚**: æ ‡å‡†é…ç½®éœ€è¦çº¦8GB GPUå†…å­˜
3. **é¦–æ¬¡è¿è¡Œ**: CacheDatasetä¼šé¢„å¤„ç†æ•°æ®ï¼Œéœ€è¦ç­‰å¾…
4. **åˆ†å¸ƒå¼è®­ç»ƒ**: ä½¿ç”¨`--distributed`å‚æ•°å¯ç”¨å¤šGPU

## æ”¯æŒå’Œç»´æŠ¤

- è¯¦ç»†æ–‡æ¡£: `README.md`
- é¡¹ç›®æŒ‡ä»¤: `CLAUDE.md`
- å¿«é€Ÿå¼€å§‹: `quick_start.sh`

é¡¹ç›®å·²å®Œå…¨å¯ç”¨ï¼Œå¯ä»¥ç›´æ¥ç”¨äºBraTSæ•°æ®è®­ç»ƒï¼ğŸš€